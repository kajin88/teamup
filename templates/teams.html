{% extends 'base.html' %}

{% block title %}Epic Teams Created - SportsMate{% endblock %}

{% block content %}
<div class="container-fluid" style="margin-top: 2rem;">
  <!-- Header Section -->
  <div class="row justify-content-center mb-4">
    <div class="col-12 text-center">
      <h1 class="fw-bold mb-2" style="color: #ffffff; font-size: 2.8rem; text-shadow: 3px 3px 6px rgba(0,0,0,0.7);">
        <span style="color: #ffffff; font-weight: 900;">
          üî• TEAMS READY! üî•
        </span>
      </h1>
      <p style="color: #ffffff; font-size: 1.3rem; font-weight: 600; text-shadow: 2px 2px 4px rgba(0,0,0,0.7);">
        <i class="bi bi-people-fill me-2" style="color: #ffd700;"></i>{{ total_participants }} epic players organized into {{ teams|length }} balanced teams!
      </p>
    </div>
  </div>

  <!-- Teams Grid -->
  <div class="row justify-content-center">
    {% for team in teams %}
      {% if teams|length <= 2 %}
        <div class="col-lg-5 col-md-6 mb-4">
      {% elif teams|length == 3 %}
        <div class="col-lg-4 col-md-6 mb-4">
      {% elif teams|length == 4 %}
        <div class="col-lg-3 col-md-6 mb-4">
      {% elif teams|length <= 6 %}
        <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
      {% else %}
        <div class="col-lg-2 col-md-3 col-sm-4 mb-4">
      {% endif %}
        <div class="sports-team-card h-100 fade-in" style="animation-delay: {{ forloop.counter0 }}00ms;">
          <div class="sports-team-header">
            <i class="bi bi-shield-fill me-2" style="color: #ffd700;"></i>
            <span style="font-size: 1.2rem; font-weight: 800; color: #ffffff;">Team {{ forloop.counter }}</span>
            <div style="font-size: 0.9rem; margin-top: 6px; color: #e0e0e0; font-weight: 600;">
              <i class="bi bi-people-fill me-1" style="color: #ffd700;"></i>{{ team|length }} player{{ team|length|pluralize }}
            </div>
          </div>
          <div class="sports-team-members" style="padding: 0;">
            {% for participant in team %}
              <div class="sports-team-member">
                <span class="member-number me-2" style="color: #ffd700; font-weight: 800; min-width: 20px; display: inline-block;">{{ forloop.counter }}.</span>
                <span style="font-weight: 600;">{{ participant }}</span>
              </div>
            {% endfor %}
          </div>
        </div>
      </div>
    {% endfor %}
  </div>

  <!-- Action Buttons -->
  <div class="row justify-content-center mt-5">
    <div class="col-auto">
      <div class="sports-action-card p-4">
        <div class="d-flex gap-4 flex-wrap justify-content-center">
          <a href="{% url 'reshuffle' %}" class="btn sports-action-btn">
            <i class="bi bi-shuffle me-2"></i> Re-shuffle
          </a>
          <button class="btn sports-action-btn" onclick="printTeams()">
            <i class="bi bi-printer-fill me-2"></i> Print Teams
          </button>
          <a href="/" class="btn sports-action-btn">
            <i class="bi bi-arrow-left-circle-fill me-2"></i> Create New Teams
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Stats Section -->
  <div class="row justify-content-center mt-4 mb-5">
    <div class="col-md-8">
      <div class="sports-stats-card p-4">
        <h5 class="text-center mb-4" style="color: #ffffff; font-size: 1.4rem; font-weight: 800; text-shadow: 2px 2px 4px rgba(0,0,0,0.7);">
          <i class="bi bi-graph-up-arrow me-2" style="color: #ffd700;"></i> TEAM STATS
        </h5>
        <div class="row text-center">
          <div class="col-4">
            <div class="sports-stat-item">
              <div class="stat-number">{{ teams|length }}</div>
              <div class="stat-label">üèÖ Teams</div>
            </div>
          </div>
          <div class="col-4">
            <div class="sports-stat-item">
              <div class="stat-number">{{ total_participants }}</div>
              <div class="stat-label">‚ö° Players</div>
            </div>
          </div>
          <div class="col-4">
            <div class="sports-stat-item">
              {% with avg_size=total_participants|floatformat:1 %}
                <div class="stat-number">
                  {% widthratio total_participants teams|length 1 %}
                </div>
              {% endwith %}
              <div class="stat-label">üî• Avg per Team</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="mt-4" style="text-align: center;"><hr/></div>
    <p style="color: #ffffff; font-size: 0.9rem; opacity: 0.9; margin: 0; text-shadow: 1px 1px 2px rgba(0,0,0,0.7); text-align: center;">
      Made with <i class="bi bi-heart-fill" style="color: #ff4757;"></i> by Kajin.
    </p>
  </div>
  
</div>

<style>
/* Sports-themed styles for teams page */
.sports-activity-badge {
  background: linear-gradient(135deg, #ff4757, #ff6b35);
  color: white;
  padding: 10px 20px;
  border-radius: 25px;
  display: inline-block;
  margin-bottom: 20px;
  font-weight: 700;
  box-shadow: 0 6px 20px rgba(255, 71, 87, 0.4);
  border: 2px solid rgba(255, 215, 0, 0.3);
}

.sports-team-card {
  background: linear-gradient(135deg, 
    rgba(26, 35, 126, 0.95) 0%, 
    rgba(63, 81, 181, 0.9) 30%, 
    rgba(33, 150, 243, 0.85) 70%, 
    rgba(3, 169, 244, 0.8) 100%) !important;
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border-radius: 20px;
  border: 3px solid rgba(255, 215, 0, 0.4);
  box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
  overflow: hidden;
  transition: all 0.3s ease;
}

.sports-team-card:hover {
  transform: translateY(-8px) scale(1.03);
  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4);
  border-color: rgba(255, 215, 0, 0.8);
}

.sports-team-header {
  background: rgba(255, 255, 255, 0.2);
  color: white;
  padding: 15px;
  text-align: center;
  border-bottom: 2px solid rgba(255, 215, 0, 0.3);
  backdrop-filter: blur(10px);
}

.sports-team-member {
  color: white;
  padding: 12px 15px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.2);
  font-size: 1rem;
  transition: all 0.2s ease;
  background: rgba(255, 255, 255, 0.1);
}

.sports-team-member:hover {
  background: rgba(255, 255, 255, 0.2);
  transform: translateX(5px);
}

.sports-team-member:last-child {
  border-bottom: none;
}

.sports-action-card {
  background: linear-gradient(135deg, 
    rgba(26, 35, 126, 0.95) 0%, 
    rgba(63, 81, 181, 0.9) 50%, 
    rgba(33, 150, 243, 0.85) 100%);
  border-radius: 25px;
  border: 3px solid rgba(255, 215, 0, 0.3);
  box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
  backdrop-filter: blur(15px);
}

.sports-action-btn {
  background: linear-gradient(135deg, #ff4757, #ff6b35) !important;
  border: 2px solid rgba(255, 215, 0, 0.5) !important;
  color: white !important;
  font-weight: 700 !important;
  padding: 12px 25px !important;
  border-radius: 20px !important;
  transition: all 0.3s ease !important;
  text-decoration: none !important;
  font-size: 1.1rem !important;
  box-shadow: 0 6px 20px rgba(255, 71, 87, 0.4) !important;
}

.sports-action-btn:hover {
  background: linear-gradient(135deg, #ff3742, #ff5722) !important;
  transform: translateY(-3px) scale(1.05) !important;
  box-shadow: 0 10px 30px rgba(255, 71, 87, 0.6) !important;
  border-color: rgba(255, 215, 0, 0.8) !important;
}

.sports-stats-card {
  background: linear-gradient(135deg, 
    rgba(26, 35, 126, 0.95) 0%, 
    rgba(63, 81, 181, 0.9) 50%, 
    rgba(33, 150, 243, 0.85) 100%);
  border-radius: 25px;
  border: 3px solid rgba(255, 215, 0, 0.3);
  box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
  backdrop-filter: blur(15px);
}

.sports-stat-item {
  padding: 15px 10px;
  border-radius: 15px;
  background: rgba(255, 255, 255, 0.1);
  margin: 0 5px;
  transition: all 0.3s ease;
  border: 2px solid rgba(255, 215, 0, 0.2);
  min-height: 120px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  overflow: hidden;
}

.sports-stat-item:hover {
  transform: translateY(-5px) scale(1.05);
  background: rgba(255, 255, 255, 0.2);
  border-color: rgba(255, 215, 0, 0.5);
}

.stat-number {
  color: #ffd700;
  font-size: clamp(1.8rem, 4vw, 2.5rem);
  font-weight: 900;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
  line-height: 1;
  margin-bottom: 8px;
}

.stat-label {
  color: #ffffff;
  font-size: clamp(0.8rem, 2vw, 1rem);
  font-weight: 600;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
  line-height: 1.2;
  word-wrap: break-word;
}

.fade-in {
  animation: fadeInUp 1s ease-out;
}

@keyframes fadeInUp {
  from { 
    opacity: 0; 
    transform: translateY(30px); 
  }
  to { 
    opacity: 1; 
    transform: translateY(0); 
  }
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .sports-stat-item {
    margin: 0 2px 10px 2px;
    padding: 12px 8px;
    min-height: 100px;
  }
  
  .stat-number {
    font-size: 1.8rem !important;
  }
  
  .stat-label {
    font-size: 0.8rem !important;
  }
}

@media (max-width: 576px) {
  .sports-stat-item {
    margin: 0 1px 8px 1px;
    padding: 10px 5px;
    min-height: 90px;
  }
  
  .stat-number {
    font-size: 1.5rem !important;
  }
  
  .stat-label {
    font-size: 0.75rem !important;
  }
}

@media print {
  body * { visibility: hidden; }
  .container-fluid, .container-fluid * { visibility: visible; }
  
  body {
    background: white !important;
    margin: 0 !important;
    padding: 0 !important;
  }
  
  .container-fluid {
    margin-top: 0.5rem !important;
    padding: 0 0.5rem !important;
  }
  
  .sports-activity-badge,
  .row:has(.sports-action-card),
  .row:has(.sports-stats-card),
  .sports-action-card,
  .sports-stats-card {
    display: none !important;
  }
  
  h1 {
    font-size: 1.5rem !important;
    color: black !important;
    margin-bottom: 0.5rem !important;
    text-shadow: none !important;
  }
  
  h1 span {
    color: black !important;
  }
  
  /* Fix subheading visibility */
  p {
    color: black !important;
    text-shadow: none !important;
  }
  
  .row.justify-content-center {
    display: flex !important;
    flex-wrap: wrap !important;
    margin: 0 !important;
  }
  
  .row.justify-content-center > div[class*="col-"] {
    width: 48% !important;
    margin: 0 1% 0.5rem 1% !important;
    flex: none !important;
  }
  
  .sports-team-card { 
    background: white !important; 
    color: black !important;
    box-shadow: none !important;
    border: 2px solid #333 !important;
    border-radius: 8px !important;
    margin-bottom: 0.5rem !important;
    page-break-inside: avoid !important;
    height: auto !important;
  }
  
  .sports-team-header {
    background: #f0f0f0 !important;
    color: black !important;
    border-radius: 6px 6px 0 0 !important;
    padding: 0.5rem !important;
    border-bottom: 1px solid #333 !important;
  }
  
  .sports-team-header span {
    color: black !important;
  }
  
  .sports-team-header div {
    color: black !important;
  }
  
  .sports-team-member {
    color: black !important;
    padding: 0.3rem 0.5rem !important;
    border-bottom: 1px solid #ddd !important;
    font-size: 0.9rem !important;
    background: white !important;
  }
  
  .sports-team-member:last-child {
    border-bottom: none !important;
  }
  
  /* Hide most Bootstrap icons but show heart */
  .bi {
    display: none !important;
  }
  
  .bi-heart-fill {
    display: inline !important;
  }
  
  .bi-heart-fill::before {
    content: "‚ô•" !important;
    display: inline !important;
    color: black !important;
    font-size: inherit !important;
  }
}
</style>

<script>
function printTeams() {
  window.print();
}

function shareTeams() {
  if (navigator.share) {
    navigator.share({
      title: 'Epic Sports Teams - {{ activity_type|safe }}',
      text: 'üèÜ Check out the epic teams created for {{ activity_type|safe }}! {{ total_participants }} players in {{ teams|length }} balanced teams! üî•',
      url: window.location.href
    });
  } else {
    // Fallback: copy to clipboard
    const url = window.location.href;
    navigator.clipboard.writeText(url).then(() => {
      alert('üéØ Team link copied to clipboard! Share the epic teams!');
    });
  }
}

// Add staggered animation to team cards
document.addEventListener('DOMContentLoaded', function() {
  const teamCards = document.querySelectorAll('.sports-team-card');
  teamCards.forEach((card, index) => {
    // Start with cards invisible
    card.style.opacity = '0';
    card.style.transform = 'translateY(30px)';
    
    setTimeout(() => {
      card.style.opacity = '1';
      card.style.transform = 'translateY(0)';
      card.style.transition = 'all 0.6s ease';
    }, index * 200);
  });
  
  // Add celebration effect
  setTimeout(() => {
    console.log('üéâ Teams are ready for action! üöÄ');
  }, 1000);
});
</script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
{% endblock %}
